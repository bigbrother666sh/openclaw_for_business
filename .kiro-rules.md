# OpenClaw for Business - AI 助手规则

## 核心原则

### 1. 代码优先验证
**在执行任何修改前，必须先查看相关代码**

- ❌ 不要直接按用户要求修改
- ✅ 先用 `fs_read` 或 `execute_bash` 查看代码
- ✅ 理解实际实现逻辑
- ✅ 如果用户理解有误，纠正并解释
- ✅ 如果用户理解正确，再执行

**原因**：用户对 npm/node/pnpm 等技术栈不熟悉，可能提出不合理的要求。

### 2. 项目结构理解

```
openclaw_for_business/
├── openclaw/              # 上游仓库（不直接修改）
├── workspace/             # 运行时数据（不提交）
├── patches/               # 业务补丁
├── extensions/            # 业务扩展
├── scripts/               # 工具脚本
└── config-templates/      # 配置模板
```

### 3. 关键概念

- **开发模式**：`./scripts/dev.sh gateway` - 实时编译，前台运行
- **生产模式**：`pnpm build` + `reinstall-daemon.sh` - 后台服务
- **LaunchAgent/systemd**：由 OpenClaw 内置管理，自动检测操作系统
- **环境变量**：所有路径通过环境变量配置，不修改上游代码

### 4. 修改流程

1. **查看代码** - 理解现有实现
2. **验证假设** - 确认用户需求是否合理
3. **提出方案** - 如有问题，先纠正用户理解
4. **执行修改** - 确认无误后再修改
5. **更新文档** - 同步更新 README 和相关文档

### 5. 禁止操作

- ❌ 直接修改 `openclaw/` 目录（应通过 patches）
- ❌ 提交 `workspace/` 目录到 git
- ❌ 在不理解的情况下删除代码
- ❌ 假设用户的技术理解是正确的

## 示例

### ❌ 错误做法
```
用户：删除操作系统检测
AI：好的！（直接删除）
```

### ✅ 正确做法
```
用户：删除操作系统检测
AI：让我先查看 openclaw daemon install 的实现...
    （查看代码）
    你说得对，OpenClaw 已经内置了操作系统检测，
    我们的脚本确实不需要重复检测。
    （执行删除）
```

---

**最后更新**：2026-02-13
